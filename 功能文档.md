# 数字染色游戏 功能文档

## 1. 软件简介
本软件用于在 9×6 的数字矩阵中进行“数字染色”与组合筛选。你可以输入数字、设置对比方式与阈值自动染色、锁定关键数字，并在计算页通过多种筛选规则得到符合条件的三位数组合。

## 2. 基本概念与规则
- 数字矩阵：共 9 行 × 6 列，每行分为左侧 3 位与右侧 3 位两个分组。
- 数字距离：两数字差值为 `min(|a-b|, 10-|a-b|)`，范围 0～5。
- 红/蓝含义（自动染色）：差值 ≤ 阈值为红色，差值 > 阈值为蓝色。
- 红/蓝含义（锁定/自定义计算）：
  - 红色：允许距离 0～3（排除 4、5）。
  - 蓝色：允许距离 2～5（排除 0、1）。
- 颜色与锁定：锁定要求格子颜色为“纯色”（四个小块同色），且必须已填写数字。

## 3. 页面结构
- 底部导航两页：
  - `配置`：输入数字、自动染色、锁定与自定义配置。
  - `计算`：设置筛选条件与输出结果。

## 4. 配置页功能

### 4.1 数字矩阵与编辑
- 点击任意格子打开编辑面板：
  - 数字：`空` 或 `0～9`。
  - 颜色：`红 / 蓝 / 清空`（全格统一染色）。
  - 锁定：满足锁定条件后可锁定/解锁。
- 锁定规则：
  - 必须填写数字。
  - 必须已染色，且为纯色。
  - 每一位（百/十/个）最多锁定 4 个数字。
  - 同一位出现“筛选范围完全相同”的锁定会提示重复。
- 锁定展示区：右侧面板会按百/十/个位展示已锁定的数字顺序。

### 4.2 自动染色与对比模式
- 阈值：0～5，决定红蓝分界。
- 重染：重新计算未锁定格子的颜色。
- 对比模式：
  - `横向比较`：同一行横向相邻（或跨 3）对比。
  - `纵向比较`：同一列纵向相邻（或跨 3）对比。
  - `左斜 / 右斜`：对角线方向对比。
  - `固定比较`：选择某一行或某一列作为基准，与其它行/列对比（整格染色）。
- `跨3`：在横向/纵向比较时启用，比较间隔为 3。
- 差值标记：对比处会显示对应的数字差值。

### 4.3 组汇总与自定义配置
- 左右两列小方格为“分组汇总”：
  - 左侧对应每行的左 3 位，右侧对应每行的右 3 位。
  - 在“纵向比较”或“固定比较”时会显示三位差值之和。
- 点击分组汇总格可设置“自定义配置”（可多选）：
  - 3红、2红1蓝、1红2蓝、3蓝。
- 提示：分组内三位数字必须填满，才会参与自定义计算。

### 4.4 行整体操作
- `上移一行 / 下移一行`：整体移动矩阵数据。
- `清空锁定`：取消所有锁定状态。

### 4.5 距离筛选（快捷入口）
- 3 个小方格依次对应：
  - 百位-十位、十位-个位、个位-百位的数字距离。
- 点击循环切换：`无色` → `红`（距离 ≤ 3）→ `蓝`（距离 > 3）。
- 与计算页的“距离筛选”同步生效。

## 5. 计算页功能

### 5.1 计算按钮
- `清空配置`：重置所有筛选条件。
- `锁定计算`：基于锁定数字得到基础组合，再叠加筛选条件。
- `自定义计算`：仅使用配置页中的分组模式进行计算。
- `总计算`：锁定计算结果 ∩ 自定义计算结果。

### 5.2 筛选条件说明
- `必选`：选择必含数字；点击条目可设置出现次数（1/2/3 次，可多选）。
- `除3余数`：三位数对 3 取余结果（0/1/2）。
- `合尾`：三位数字之和对 10 取余。
- `小大`：0～4 为小，5～9 为大（3小/2小1大/1小2大/3大）。
- `012路`：按数字对 3 取余的分布数量（每路可选 0～3 次）。
- `奇偶`：奇偶分布（3奇/2奇1偶/1奇2偶/3偶）。
- `跨差`：最大值与最小值之差。
- `凹凸型`：
  - 凹型：a>b<a
  - 凸型：a<b>a
  - 上升：a<b<c
  - 下降：a>b>c
  - 偏型：a=b 或 b=c
- `连数`：是否包含连续数字（0/2/3 连）。
- `距离筛选`：与配置页一致，按三组位差过滤。

## 6. 使用流程示例
1. 在“配置”页逐格填写数字。
2. 选择对比模式与阈值，点击“重染”得到自动染色效果。
3. 需要参与锁定的格子手动设为纯红/纯蓝并锁定。
4. 如需自定义计算，点击左右分组汇总格配置模式。
5. 切换到“计算”页设置筛选条件，执行锁定计算 / 自定义计算 / 总计算。

## 7. 结果展示与保存
- 计算结果以弹窗列表展示，支持选中复制。
- 所有配置、锁定与筛选会自动保存在本地，重启后仍可继续使用。
